# OpenClaw Railway Template + Tailscale (1‚Äëclick deploy)

[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/template/openclaw-tailscale)

This repo packages **OpenClaw** for Railway with **Tailscale integration** and a web-based **/setup** wizard for zero-config deployment.

## What you get

- **OpenClaw Gateway + Control UI** (served at `/` and `/openclaw`)
- **Tailscale Integration** (secure, private access via your tailnet)
- **Setup Wizard** at `/setup` (password-protected, no CLI needed)
- **Optional Web Terminal** at `/tui` for browser-based TUI access
- **Persistent State** via Railway Volume (config/credentials survive redeploys)

---

## üöÄ Quick Start

### 1-Click Deploy

1. Click the **Deploy on Railway** button above
2. Railway will prompt you to set **SETUP_PASSWORD** (auto-generated)
3. **Optional:** Add **TAILSCALE_AUTHKEY** for private tailnet access
4. Deploy completes in ~2 minutes

### First-Time Setup

1. **Via Railway Public URL** (if Tailscale not configured):
   - Visit `https://<your-project>.up.railway.app/setup`
   - Enter the `SETUP_PASSWORD` from Railway Variables
   - Complete OpenClaw onboarding (choose AI provider, configure channels)

2. **Via Tailscale** (if `TAILSCALE_AUTHKEY` set):
   - Visit `http://<TAILSCALE_HOSTNAME>.<your-tailnet>.ts.net:8080/setup`
   - Or with HTTPS: `https://<TAILSCALE_HOSTNAME>.<your-tailnet>.ts.net/setup` (if `ENABLE_TAILSCALE_SERVE=true`)

---

## üîê Tailscale Integration

### Why Tailscale?

- **Private Access**: Expose OpenClaw only to your tailnet (no public internet access)
- **Zero Config VPN**: Access from any device in your tailnet (phone, laptop, server)
- **MagicDNS**: Use friendly hostnames instead of IPs
- **Optional HTTPS**: Built-in HTTPS reverse proxy via `tailscale serve`

### Setup Instructions

#### Step 1: Get a Tailscale Auth Key

1. Go to [Tailscale Admin Console ‚Üí Settings ‚Üí Keys](https://login.tailscale.com/admin/settings/keys)
2. Click **Generate auth key**
3. Configure key:
   - ‚úÖ **Reusable** (recommended for Railway rebuilds)
   - ‚úÖ **Ephemeral** (optional - auto-cleanup on disconnect)
   - ‚úÖ **Tags** (e.g., `tag:railway` for ACL rules)
4. Copy the key (starts with `tskey-auth-...`)

#### Step 2: Add to Railway

In your Railway project **Variables** section, add:

```env
TAILSCALE_AUTHKEY=tskey-auth-xxxxxxxxxxxxxxxxxxxxx
```

**Optional variables:**

```env
TAILSCALE_HOSTNAME=openclaw-prod                # Custom hostname (default: openclaw-railway)
ENABLE_TAILSCALE_SERVE=true                     # Enable HTTPS reverse proxy (default: false)
TAILSCALE_SERVE_HTTPS_PORT=443                  # HTTPS port (default: 443)
TAILSCALE_ACCEPT_DNS=false                      # Accept Tailscale DNS (default: false)
```

#### Step 3: Deploy & Access

After deployment, check Railway logs for:

```
[tailscale] ‚úì Connected to tailnet
[tailscale] ‚úì Access via: https://openclaw-prod.<your-tailnet>.ts.net
```

**Access methods:**

| Mode | URL | Notes |
|------|-----|-------|
| **Tailnet-only** (default) | `http://<hostname>.<tailnet>.ts.net:8080` | No HTTPS, tailnet-only |
| **With HTTPS** (`ENABLE_TAILSCALE_SERVE=true`) | `https://<hostname>.<tailnet>.ts.net` | HTTPS reverse proxy enabled |

### Disable Public Access (Recommended)

To make OpenClaw **tailnet-only**:

1. Go to Railway **Settings** ‚Üí **Networking**
2. Toggle **Public Networking** to **OFF**
3. OpenClaw will only be accessible via Tailscale

---

## üîß Environment Variables

### Required

| Variable | Description | Example |
|----------|-------------|---------|
| `SETUP_PASSWORD` | Protects `/setup` wizard | Auto-generated by Railway |

### OpenClaw Configuration

| Variable | Default | Description |
|----------|---------|-------------|
| `OPENCLAW_STATE_DIR` | `/data/.openclaw` | Config directory |
| `OPENCLAW_WORKSPACE_DIR` | `/data/workspace` | Agent workspace |
| `PORT` | `8080` | HTTP port (auto-set by Railway) |

### Tailscale Configuration

| Variable | Default | Required | Description |
|----------|---------|----------|-------------|
| `TAILSCALE_AUTHKEY` | _(none)_ | No* | Tailscale auth key ([get here](https://login.tailscale.com/admin/settings/keys)) |
| `TAILSCALE_HOSTNAME` | `openclaw-railway` | No | Tailscale hostname |
| `ENABLE_TAILSCALE_SERVE` | `false` | No | Enable HTTPS reverse proxy (443 ‚Üí 8080) |
| `TAILSCALE_SERVE_HTTPS_PORT` | `443` | No | HTTPS port for serve |
| `TAILSCALE_ACCEPT_DNS` | `false` | No | Accept Tailscale DNS settings |

*_If `TAILSCALE_AUTHKEY` is not set, Tailscale is disabled and OpenClaw runs normally._

### Web Terminal (TUI)

| Variable | Default | Description |
|----------|---------|-------------|
| `ENABLE_WEB_TUI` | `false` | Enable web terminal at `/tui` |
| `TUI_IDLE_TIMEOUT_MS` | `300000` (5 min) | Idle timeout |
| `TUI_MAX_SESSION_MS` | `1800000` (30 min) | Max session duration |

---

## üìñ How It Works

### Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Railway Container                       ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ entrypoint.sh (root)             ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ 1. Setup persistent storage      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ 2. [Optional] Start Tailscale    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ    - Start tailscaled daemon     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ    - Wait for socket (max 30s)   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ    - Run tailscale up            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ    - [Optional] tailscale serve  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ 3. Start OpenClaw wrapper        ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                 ‚îÇ                       ‚îÇ
‚îÇ                 ‚ñº                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ OpenClaw Wrapper (Express)       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ - /setup wizard                  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ - /tui web terminal              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ - Proxy to gateway               ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                 ‚îÇ                       ‚îÇ
‚îÇ                 ‚ñº                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ OpenClaw Gateway                 ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ (localhost:18789)                ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                     ‚îÇ
         ‚ñº                     ‚ñº
   Public URL          Tailscale Network
(Railway domain)      (private tailnet)
```

### Request Flow

1. **User ‚Üí Railway Public URL** ‚Üí Wrapper ‚Üí Gateway
2. **User ‚Üí Tailscale** ‚Üí [Optional: serve HTTPS] ‚Üí Wrapper ‚Üí Gateway

### Startup Sequence

```
1. Setup persistent storage (/data volume)
   ‚îî‚îÄ> Persist linuxbrew

2. [If TAILSCALE_AUTHKEY set]
   ‚îú‚îÄ> Create /var/run/tailscale directory
   ‚îú‚îÄ> Start tailscaled daemon (userspace networking)
   ‚îú‚îÄ> Wait for socket (/var/run/tailscale/tailscaled.sock) - MAX 30s
   ‚îú‚îÄ> Run `tailscale up --authkey=...`
   ‚îú‚îÄ> [If ENABLE_TAILSCALE_SERVE=true]
   ‚îÇ   ‚îî‚îÄ> Run `tailscale serve --https=443 http://127.0.0.1:8080`
   ‚îî‚îÄ> Print Tailscale status

3. Start OpenClaw wrapper (node src/server.js)
   ‚îî‚îÄ> Binds to 0.0.0.0:$PORT
```

---

## üõ†Ô∏è Local Testing

### With Docker

```bash
docker build -t openclaw-tailscale .

docker run --rm -p 8080:8080 \
  -e PORT=8080 \
  -e SETUP_PASSWORD=test \
  -e TAILSCALE_AUTHKEY=tskey-auth-xxxxx \
  -e ENABLE_TAILSCALE_SERVE=false \
  -e OPENCLAW_STATE_DIR=/data/.openclaw \
  -e OPENCLAW_WORKSPACE_DIR=/data/workspace \
  -v $(pwd)/.tmpdata:/data \
  openclaw-tailscale

# Access: http://localhost:8080/setup (password: test)
```

### Without Tailscale

Omit `TAILSCALE_AUTHKEY` to disable Tailscale:

```bash
docker run --rm -p 8080:8080 \
  -e PORT=8080 \
  -e SETUP_PASSWORD=test \
  -e OPENCLAW_STATE_DIR=/data/.openclaw \
  -e OPENCLAW_WORKSPACE_DIR=/data/workspace \
  -v $(pwd)/.tmpdata:/data \
  openclaw-tailscale
```

---

## üîç Troubleshooting

### "Failed to connect to local Tailscale daemon"

**Cause:** `tailscale serve` ran before daemon was ready

**Fix:** The `entrypoint.sh` now waits up to 30s for socket. Check logs for:
```
[tailscale] Waiting for socket... (Xs)
[tailscale] ‚úì Socket ready: /var/run/tailscaled.sock
```

If timeout occurs, check Railway logs for `tailscaled` errors.

### "Cannot access via Tailscale URL"

**If using HTTPS (`ENABLE_TAILSCALE_SERVE=true`):**
- Wait 60s after first deploy (Tailscale cert provisioning)
- Check logs for `[tailscale] Serve status`
- Verify you're logged into the same tailnet

**If using direct access (no SERVE):**
- Find IP from logs: `tailscale status` output
- Access: `http://<IP>:8080/setup`

### "OpenClaw not starting"

**Check:**
1. `SETUP_PASSWORD` is set
2. `/data` volume is mounted (check Railway dashboard)
3. Logs show `[openclaw] Starting OpenClaw wrapper on port 8080...`

### Userspace Networking Warnings

```
Warning: userspace networking mode is experimental
```

**This is normal.** Tailscale uses userspace networking in containers without `CAP_NET_ADMIN` (Railway default).

### Check Tailscale Status

Access the web terminal (`/tui` if `ENABLE_WEB_TUI=true`) and run:

```bash
tailscale status
tailscale serve status  # If ENABLE_TAILSCALE_SERVE=true
```

### "Telegram channel not working"

**Symptom:** Bot doesn't respond to messages

**Possible causes:**

1. **Channel not enabled:**
   - Check Railway logs for: `[telegram] ‚úì ENABLED`
   - If you see `[telegram] ‚ùå SKIPPED`, OpenClaw was built without Telegram support

2. **Pairing not approved:**
   - Message your bot in Telegram
   - Go to `/setup` ‚Üí **Approve Pairing**
   - Select your Telegram user/chat and approve

3. **Token not saved:**
   - Check `/data/.openclaw/openclaw.json` exists (via web terminal or Railway logs)
   - Verify `channels.telegram.botToken` is present in config

4. **Gateway not restarted after setup:**
   - Check logs for: `[setup] Gateway started.`
   - If missing, go to `/setup` ‚Üí **Run Doctor** to restart gateway

**Fix:**
```bash
# Via web terminal (/tui)
openclaw config get channels.telegram  # Verify config exists
openclaw channels list                 # Check if telegram is enabled
```

Expected output:
```json
{
  "enabled": true,
  "dmPolicy": "pairing",
  "botToken": "1234567890:ABC...",
  "groupPolicy": "allowlist",
  "streamMode": "partial"
}
```

### "Channel plugin not available"

**Symptom:** Setup logs show `[telegram] ‚ùå SKIPPED` or channel not working

**Cause:** OpenClaw channels are **plugin-based** and installed during the onboarding wizard, not at build-time.

**Understanding Channel Plugins:**
- Channels (Telegram, Discord, Slack) are **not pre-installed** in the Docker image
- During setup wizard, OpenClaw asks which channels you want to use
- Selected channels are installed as npm packages when you complete onboarding
- This is **normal behavior** - channels are user-configurable, not build-time

**Fix:**

1. **Complete onboarding wizard:**
   - Go to `/setup` wizard
   - Choose your AI provider (Anthropic, OpenAI, etc.)
   - When prompted, select which channels to install (Telegram, Discord, Slack)
   - Setup will install selected channel plugins via npm

2. **Verify installation:**
   After onboarding, check via web terminal:
   ```bash
   openclaw channels list  # Shows installed channels
   openclaw config get channels  # Shows channel configuration
   ```

3. **If channel installation failed during onboarding:**
   - Check Railway logs for npm install errors
   - Ensure `/data` volume has write permissions
   - Re-run setup and try again

---

## üìö Chat Integration Setup

### Telegram Setup (Recommended)

**Step 1: Create Bot**
1. Open Telegram and message [@BotFather](https://t.me/botfather)
2. Send `/newbot` command
3. Follow prompts to choose name and username
4. BotFather gives you a token like: `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`

**Step 2: Configure in OpenClaw**
1. Go to `/setup` wizard in your deployed instance
2. During setup, paste the **Telegram Bot Token** in the Telegram field
3. Click **Run Setup**
4. Setup automatically:
   - ‚úÖ Saves token to config (`/data/.openclaw/openclaw.json`)
   - ‚úÖ **Enables Telegram channel automatically**
   - ‚úÖ Sets pairing policy to `pairing` (secure by default)

**Step 3: Pair Your Chat**
1. Open Telegram and message your bot
2. Send any message (e.g., "hello")
3. Go back to `/setup` ‚Üí **Approve Pairing** button
4. Select your Telegram user/chat and approve
5. ‚úÖ Done! You can now chat with OpenClaw via Telegram

**Important Notes:**
- ‚ùå **DO NOT** set `TELEGRAM_BOT_TOKEN` as a Railway environment variable
- ‚úÖ Token is stored securely in `/data/.openclaw/openclaw.json` (persisted via volume)
- ‚úÖ Channel is **auto-enabled** when token is provided during setup
- ‚úÖ If you redeploy, token persists (volume survives redeploys)

---

### Discord Setup

**Step 1: Create Bot**
1. Go to [Discord Developer Portal](https://discord.com/developers/applications)
2. **New Application** ‚Üí pick a name
3. Open **Bot** tab ‚Üí **Add Bot**
4. Copy **Bot Token**

**Step 2: Enable Required Intents**
‚ö†Ô∏è **CRITICAL**: Enable **MESSAGE CONTENT INTENT** in Bot settings
   - Discord Developer Portal ‚Üí Your App ‚Üí Bot ‚Üí Privileged Gateway Intents
   - Toggle **MESSAGE CONTENT INTENT** to ON

**Step 3: Invite Bot to Server**
1. OAuth2 ‚Üí URL Generator
2. Select scopes: `bot`, `applications.commands`
3. Select permissions: `Send Messages`, `Read Messages`, `Read Message History`
4. Copy generated URL and open in browser to invite bot

**Step 4: Configure in OpenClaw**
1. Go to `/setup` wizard
2. Paste **Discord Bot Token** in Discord field
3. Click **Run Setup**
4. Setup automatically enables Discord channel

**Step 5: Pair Your Server**
1. In Discord, send a message mentioning your bot
2. Go to `/setup` ‚Üí **Approve Pairing**
3. Approve your Discord server

---

### Slack Setup

**Step 1: Create Slack App**
1. Go to [Slack API](https://api.slack.com/apps)
2. **Create New App** ‚Üí From scratch
3. Configure OAuth scopes (Bot Token Scopes):
   - `chat:write`
   - `channels:history`
   - `groups:history`
   - `im:history`
   - `mpim:history`

**Step 2: Get Tokens**
1. **Bot Token**: OAuth & Permissions ‚Üí Bot User OAuth Token (`xoxb-...`)
2. **App Token**: Basic Information ‚Üí App-Level Tokens (`xapp-...`)

**Step 3: Configure in OpenClaw**
1. Go to `/setup` wizard
2. Paste **Slack Bot Token** and **App Token**
3. Click **Run Setup**
4. Setup automatically enables Slack channel

**Step 4: Pair Your Workspace**
1. In Slack, invite bot to a channel: `/invite @yourbotname`
2. Send a message mentioning the bot
3. Go to `/setup` ‚Üí **Approve Pairing**

---

## üåê Web Terminal (TUI)

The template includes an optional web-based terminal for `openclaw tui`.

### Enabling

Set `ENABLE_WEB_TUI=true` in Railway Variables. Access at `/tui`.

### Security

| Control | Description |
|---------|-------------|
| **Opt-in only** | Disabled by default |
| **Password protected** | Uses same `SETUP_PASSWORD` as setup wizard |
| **Single session** | Only 1 concurrent session allowed |
| **Idle timeout** | Auto-closes after 5 minutes of inactivity |
| **Max duration** | Hard limit of 30 minutes per session |

---

## üìã FAQ

**Q: How do I access the setup page?**

A: Go to `/setup` on your deployed instance. Use `SETUP_PASSWORD` from Railway Variables.

**Q: Can I disable public access and use Tailscale only?**

A: Yes! Set `TAILSCALE_AUTHKEY` in Railway Variables, then disable **Public Networking** in Railway Settings ‚Üí Networking.

**Q: Do I need HTTPS reverse proxy (`ENABLE_TAILSCALE_SERVE`)?**

A: No. By default, Tailscale just adds your container to your tailnet. Use `ENABLE_TAILSCALE_SERVE=true` only if you want Tailscale to provide HTTPS (port 443) to the service.

**Q: I see "gateway disconnected" in the Control UI.**

A: Access the UI via `/setup` ‚Üí "Open OpenClaw UI" button. The setup page injects the required auth token.

**Q: How do I change the AI model after setup?**

A: Use the web terminal (`/tui`) or OpenClaw CLI:
```bash
openclaw models set anthropic/claude-sonnet-4-20250514
openclaw models list --all  # See available models
```

**Q: My config seems broken. How do I fix it?**

A: Go to `/setup` ‚Üí "Run Doctor" button. This runs `openclaw doctor --repair`.

**Q: How do I get my Tailscale hostname?**

A: Check Railway logs after deployment:
```
[tailscale] ‚úì Access via: https://openclaw-railway.<your-tailnet>.ts.net
```

Or run `tailscale status` in the web terminal.

**Q: How does Telegram channel auto-enable work?**

A: When you paste your Telegram bot token in the `/setup` wizard:
1. Setup saves token to `/data/.openclaw/openclaw.json`
2. Setup **automatically sets** `enabled: true` for the Telegram channel
3. Gateway restarts and loads the enabled channel
4. **You only need to approve pairing** - no manual channel enabling needed

If you redeploy or restart, the template automatically re-enables any channel that has a token but is disabled.

**Q: Do I need to set TELEGRAM_BOT_TOKEN as an environment variable?**

A: **No!** ‚ùå Do NOT set bot tokens as Railway environment variables. Instead:
1. Paste token in `/setup` wizard during setup
2. Token is saved to config file on `/data` volume (persists across redeploys)
3. Channel is auto-enabled when token is detected

**Q: I pasted my Telegram token but the channel isn't working. What's wrong?**

A: Check the following:
1. **Is Telegram supported in this OpenClaw build?**
   - Check setup logs for: `[telegram] ‚úì ENABLED` (success) or `[telegram] ‚ùå SKIPPED` (not supported)
   - If skipped, OpenClaw was built without Telegram support

2. **Did you approve pairing?**
   - Go to `/setup` ‚Üí **Approve Pairing** button
   - Message your bot in Telegram first, then approve

3. **Check Railway logs:**
   ```
   [channels] Auto-enabling channels with tokens: telegram
   [channels] ‚úì telegram auto-enabled. Next: approve pairing in telegram.
   ```

**Q: Can I use the same Telegram bot token across multiple deployments?**

A: **No!** Each Telegram bot can only run one instance at a time. If you deploy to multiple Railway projects:
1. Create a separate bot via @BotFather for each deployment
2. Each bot gets its own unique token
3. Use different tokens in each deployment's setup wizard

**Q: My Telegram channel was working but stopped after redeploy. Why?**

A: This should NOT happen if `/data` volume is properly mounted. Check:
1. Railway dashboard ‚Üí Your service ‚Üí **Volumes** tab
2. Verify `/data` volume exists and is mounted
3. Check Railway logs for:
   ```
   [channels] Checking for configured channels to auto-enable...
   [channels] All configured channels are already enabled
   ```
4. If volume was deleted, you'll need to run setup again

---

## üì¶ Files & Structure

```
.
‚îú‚îÄ‚îÄ Dockerfile              # Multi-stage build (OpenClaw from source + Tailscale)
‚îú‚îÄ‚îÄ entrypoint.sh           # Startup script (root) with channel verification
‚îú‚îÄ‚îÄ railway.json            # Railway template metadata
‚îú‚îÄ‚îÄ railway.toml            # Railway build config
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ server.js           # Express wrapper + proxy + auto-enable
‚îÇ   ‚îî‚îÄ‚îÄ public/             # Setup wizard static files
‚îú‚îÄ‚îÄ DEPLOYMENT_GUIDE.md     # Detailed deployment docs
‚îú‚îÄ‚îÄ RAILWAY_TEMPLATE.md     # Publishing guide
‚îî‚îÄ‚îÄ README.md               # This file
```

### Build Process

This template uses the **official OpenClaw Docker image** and layers Tailscale on top:

**Base Image:**
- `ghcr.io/openclaw/openclaw:2026.2.9` (official OpenClaw release)
- Includes OpenClaw CLI and core functionality
- Channels (Telegram, Discord, Slack) are **plugins installed during onboarding**

**Our Additions:**
- Node 24 runtime
- Tailscale integration (optional, via `TAILSCALE_AUTHKEY`)
- Express wrapper for setup wizard
- Auto-enable logic for configured channels
- Persistent storage via `/data` volume

**Why use official image?**
- ‚úÖ Always up-to-date with latest OpenClaw release
- ‚úÖ Tested and verified by OpenClaw team
- ‚úÖ Faster builds (no source compilation needed)
- ‚úÖ Channels installed on-demand via onboarding wizard

**Channel Installation:**
Channels are **not pre-installed**. During `/setup` wizard:
1. User selects which channels to use (Telegram, Discord, Slack)
2. OpenClaw installs selected channels as npm packages
3. Channels are configured and enabled automatically
4. Installation persists to `/data` volume

---

## üîí Security Notes

1. **Secrets Masking**: Auth keys are never logged in plaintext
2. **DNS Control**: `accept-dns=false` by default (prevents Tailscale DNS hijacking)
3. **Serve Disabled**: `ENABLE_TAILSCALE_SERVE=false` by default (opt-in for HTTPS)
4. **Setup Password**: Auto-generated 32-char secret by Railway
5. **Web TUI**: Disabled by default, requires explicit opt-in

---

## üìñ Documentation

- **[DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md)** - Comprehensive deployment reference
- **[CHANGELOG_TAILSCALE_FIX.md](./CHANGELOG_TAILSCALE_FIX.md)** - Tailscale fix changelog
- **[CLAUDE.md](./CLAUDE.md)** - Project architecture and coding guidelines

---

## üÜò Support

- **Railway Template Issues**: [GitHub Issues](https://github.com/maTheTrainee/openclaw-railway-template-tailscale-and-backup/issues)
- **OpenClaw Docs**: [OpenClaw Documentation](https://github.com/openclaw/openclaw)
- **Tailscale Docs**: [Tailscale Knowledge Base](https://tailscale.com/kb/)
- **Railway Help**: [Railway Discord](https://discord.gg/railway)

---

## üìù License

This template is provided as-is for deploying OpenClaw on Railway. See OpenClaw's license for details.

---

**Built with ‚ù§Ô∏è for the Railway + Tailscale + OpenClaw community**
